---
// src/layouts/MainLayout.astro
// Layout principal que respeta el diseño original de VinylStation

export interface Props {
  title: string;
  description: string;
}

const { title, description } = Astro.props;

// Importar componentes originales
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import RadioPlayer from '../components/RadioPlayer.astro'; // Asegúrate que este componente exista y funcione como esperas
import VinylParticles from '../components/VinylParticles.astro'; // Vinilos flotantes animados
---

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title}</title>
  <meta name="description" content={description} />
  
  {/* Theme color para la UI del navegador (basado en --color-bg) */}
  <meta name="theme-color" content="#0a0a0a" /> 
  
  {/* Open Graph */}
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="website" />
  {/* Considera añadir una imagen por defecto para Open Graph si la tienes:
  <meta property="og:image" content="/images/default-og-image.png" /> 
  <meta property="og:url" content={Astro.url.href} />
  */}
  
  {/* Twitter Card */}
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  {/* Considera añadir una imagen por defecto para Twitter Card si la tienes:
  <meta name="twitter:image" content="/images/default-twitter-image.png" />
  */}
  
  {/* Favicon */}
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  {/* Considera añadir otros favicons para compatibilidad:
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  */}
  
  {/* Estilos globales */}
  {/* Asegúrate que la ruta a global.css es correcta y que el archivo existe */}
  <link rel="stylesheet" href="/styles/global.css" />
  
  {/* Fuentes */}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  {/* Header con reproductor de radio */}
  <Header>
    <RadioPlayer />
  </Header>

  {/* Animación de vinilos flotantes - Posicionado entre header y footer */}
  <VinylParticles />

  {/* Contenido principal de la página */}
  <main>
    <slot /> {/* Aquí se renderiza el contenido de cada página individual */}
  </main>

  {/* Footer */}
  <Footer />

  {/* Funcionalidades interactivas adicionales (compatible con Cloudflare) */}
  <script src="/scripts/interactive-features.js" defer></script>
  
  {/* Radio State Manager - Mantener estado entre páginas */}
  <script src="/scripts/radio-state-manager.js" defer></script>
</body>
</html>

<style is:global>
  /* Variables CSS con modo noche/día */
  :root {
    /* Colores base */
    --color-darkest:   #05021f;
    --color-dark:      #0b1739;
    --color-blue:      #1a3459;
    --color-black:     #020202;
    --color-gray-dark: #262626;
    --color-gray:      #636162;
    --color-brown:     #904139;
    --color-gold:      #c5ad7b;
    --color-white:     #ffffff;
    --color-light-blue: #d5e6ff;

    /* Modo Noche (por defecto) */
    --bg-color: var(--color-darkest);
    --bg-gradient-end: #0b1739; /* Gradiente hacia azul más claro */
    --title-color: var(--color-gold);
    --text-color: var(--color-white);
    
    /* Variables RGB para transparencias */
    --color-bg-rgb: 5, 2, 31;
    
    /* Variables semánticas */
    --color-primary:   var(--color-blue);
    --color-secondary: var(--color-brown);
    --color-accent:    var(--color-gold);

    --color-bg:        var(--bg-color);
    --color-surface:   var(--color-gray-dark);
    --color-card-bg:   var(--color-gray-dark);
    --color-text:      var(--text-color);
    --color-text-secondary: var(--color-gray);
    --color-text-light: var(--text-color);
    --color-text-muted: var(--color-gray);
    --color-border:    var(--color-gray-dark);

    --font-family-base: 'Inter', sans-serif;
    --header-height: 80px;
    --header-mobile-height: 120px;
  }

  /* Modo Día */
  [data-theme="day"] {
    --bg-color: var(--color-light-blue);
    --bg-gradient-end: #f0f6ff; /* Gradiente hacia azul aún más claro */
    --title-color: var(--color-darkest);
    --text-color: var(--color-black);
    
    /* Variables RGB para transparencias en modo día */
    --color-bg-rgb: 213, 230, 255;
    
    --color-bg: var(--bg-color);
    --color-text: var(--text-color);
    --color-text-light: var(--text-color);
    --color-surface: rgba(255, 255, 255, 0.8);
    --color-card-bg: rgba(255, 255, 255, 0.9);
    --color-border: rgba(5, 2, 31, 0.2);
    --color-text-secondary: rgba(5, 2, 31, 0.7);
    --color-text-muted: rgba(5, 2, 31, 0.6);
  }


  /* Reset y configuración base */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth; /* Para scroll suave en anclas */
  }

  body {
    font-family: var(--font-family-base);
    background: linear-gradient(135deg, var(--bg-color) 0%, var(--bg-gradient-end) 100%);
    color: var(--color-text);
    line-height: 1.6;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    font-size: 16px;
    transition: background 0.3s ease, color 0.3s ease; /* Transición suave */
    position: relative;
    overflow-x: hidden;
    padding-top: 70px; /* Espacio para header fijo en todas las versiones */
  }
  
  @media (min-width: 768px) {
    body {
      padding-top: 80px; /* Un poco más de espacio en desktop */
    }
  }
  
  /* Fondo animado con partículas - DESHABILITADO */
  /*
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background: 
      radial-gradient(circle at 20% 80%, rgba(197, 173, 123, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(26, 52, 89, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(197, 173, 123, 0.05) 0%, transparent 50%);
    animation: backgroundFloat 20s ease-in-out infinite;
  }
  */

  main {
    flex: 1; /* Asegura que el main ocupe el espacio disponible para que el footer quede abajo */
    width: 100%; /* Asegura que main ocupe todo el ancho */
  }

  /* Enlaces globales */
  a {
    color: var(--color-primary);
    text-decoration: none; /* Es común quitar el subrayado por defecto y manejarlo con hover/focus */
    transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out;
  }

  a:hover,
  a:focus { /* :focus es importante para accesibilidad */
    color: var(--color-accent);
    /* text-decoration: underline; Podrías añadir subrayado en hover/focus si lo deseas */
  }

  /* Headings con colores específicos - JERARQUÍA CORREGIDA */
  h1, h2, h3, h4, h5, h6 {
    color: var(--title-color); /* Dorado en noche, azul oscuro en día */
    font-weight: 600; /* Menos grueso */
    line-height: 1.3;
    margin-bottom: 0.75em;
    transition: color 0.3s ease;
  }
  
  /* Tamaños desktop - jerarquía clara */
  h1 { font-size: 3.2rem; font-weight: 700; }
  h2 { font-size: 2.4rem; font-weight: 600; }
  h3 { font-size: 1.8rem; font-weight: 600; }
  h4 { font-size: 1.4rem; font-weight: 500; }
  h5 { font-size: 1.2rem; font-weight: 500; }
  h6 { font-size: 1rem; font-weight: 500; }
  
  /* Párrafos globales con colores automáticos día/noche */
  p {
    color: var(--color-text);
    line-height: 1.6;
    margin-bottom: 1rem;
    transition: color 0.3s ease;
  }
  
  /* Asegurar que todos los párrafos en cualquier contexto respeten los colores */
  article p,
  section p,
  div p,
  main p,
  .content p,
  .content-body p,
  .noticia-content p {
    color: var(--color-text) !important;
  }
  
  /* En modo día: párrafos negros */
  [data-theme="day"] p,
  [data-theme="day"] article p,
  [data-theme="day"] section p,
  [data-theme="day"] div p,
  [data-theme="day"] main p,
  [data-theme="day"] .content p,
  [data-theme="day"] .content-body p,
  [data-theme="day"] .noticia-content p {
    color: var(--color-black) !important;
  }
  
  /* En modo noche: párrafos blancos */
  [data-theme="night"] p,
  [data-theme="night"] article p,
  [data-theme="night"] section p,
  [data-theme="night"] div p,
  [data-theme="night"] main p,
  [data-theme="night"] .content p,
  [data-theme="night"] .content-body p,
  [data-theme="night"] .noticia-content p {
    color: var(--color-white) !important;
  }


  /* Imágenes responsivas por defecto */
  img, video, svg {
    max-width: 100%;
    height: auto;
    display: block; /* Evita espacio extra debajo de las imágenes inline */
  }

  /* Botones globales */
  .btn {
    display: inline-block;
    padding: 0.875rem 1.75rem; /* Ajuste leve para mejor proporción */
    border-radius: 0.5rem; /* Coherente con muchos diseños modernos */
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease-in-out; /* Transición más rápida */
    border: 2px solid transparent; /* Borde base para evitar saltos en hover */
    cursor: pointer;
    font-family: inherit; /* Heredar la fuente del body */
    text-align: center;
    font-size: 1rem; /* Tamaño de fuente base para botones */
  }

  .btn-primary {
    background-color: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
  }

  .btn-primary:hover,
  .btn-primary:focus {
    background-color: var(--color-secondary);
    border-color: var(--color-secondary);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* Añadir una sombra sutil en hover */
  }

  .btn-secondary {
    background-color: transparent;
    color: var(--color-primary);
    border: 2px solid var(--color-primary);
  }

  .btn-secondary:hover,
  .btn-secondary:focus {
    background-color: var(--color-primary);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(147, 51, 234, 0.1); /* Sombra con color de acento si es apropiado */
  }

  /* Utilidades de espaciado */
  .container {
    width: 100%; /* Ocupa el ancho completo */
    max-width: 1200px; /* Pero no más de 1200px */
    margin-left: auto;  /* Centrado */
    margin-right: auto; /* Centrado */
    padding-left: 1rem;  /* Espacio interno en los lados */
    padding-right: 1rem; /* Espacio interno en los lados */
  }

  .section {
    padding-top: 3rem;
    padding-bottom: 3rem;
  }

  /* Mejoras de accesibilidad para focus */
  *:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
  }


  /* Responsive - JERARQUÍA MEJORADA */
  @media (max-width: 992px) { /* Breakpoint para tablets */
    .container {
        max-width: 960px;
    }
    /* Mantener jerarquía clara en tablets */
    h1 { font-size: 2.8rem; }
    h2 { font-size: 2.2rem; }
    h3 { font-size: 1.6rem; }
    h4 { font-size: 1.3rem; }
  }

  @media (max-width: 768px) { /* Breakpoint para tablets pequeñas y móviles grandes */
    .container {
      /* max-width: 720px; Ya es 100% con padding */
      padding-left: 0.75rem;
      padding-right: 0.75rem;
    }
    
    .section {
      padding-top: 2rem;
      padding-bottom: 2rem;
    }
    
    /* Jerarquía móvil mejorada - h1 SIEMPRE más grande que h2 */
    h1 { font-size: 2.4rem; font-weight: 700; }
    h2 { font-size: 1.8rem; font-weight: 600; }
    h3 { font-size: 1.4rem; font-weight: 600; }
    h4 { font-size: 1.2rem; font-weight: 500; }
    h5 { font-size: 1.1rem; font-weight: 500; }
    h6 { font-size: 1rem; font-weight: 500; }
    
    .btn {
      padding: 0.75rem 1.25rem;
      font-size: 0.9rem;
    }
  }

  @media (max-width: 576px) { /* Breakpoint para móviles pequeños */
     body {
        font-size: 15px;
     }
     
     /* Jerarquía móvil pequeño - aún más clara */
     h1 { font-size: 2rem; font-weight: 700; }
     h2 { font-size: 1.5rem; font-weight: 600; }
     h3 { font-size: 1.2rem; font-weight: 600; }
     h4 { font-size: 1.1rem; font-weight: 500; }
     h5 { font-size: 1rem; font-weight: 500; }
     h6 { font-size: 0.9rem; font-weight: 500; }
  }
  
  @media (max-width: 480px) { /* Móviles muy pequeños */
     /* Jerarquía para pantallas muy pequeñas */
     h1 { font-size: 1.8rem; font-weight: 700; }
     h2 { font-size: 1.3rem; font-weight: 600; }
     h3 { font-size: 1.1rem; font-weight: 600; }
  }

  /* Botón de cambio de tema global (ahora se maneja en el Header) */
  
  /* Animación del fondo - DESHABILITADA */
  /*
  @keyframes backgroundFloat {
    0%, 100% {
      transform: translate(0, 0) rotate(0deg);
    }
    33% {
      transform: translate(30px, -30px) rotate(120deg);
    }
    66% {
      transform: translate(-20px, 20px) rotate(240deg);
    }
  }
  
  [data-theme="day"] body::before {
    background: 
      radial-gradient(circle at 20% 80%, rgba(5, 2, 31, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(197, 173, 123, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(5, 2, 31, 0.03) 0%, transparent 50%);
  }
  */
</style>