class e{constructor(){this.audio=document.getElementById("radio-audio"),this.playPauseBtn=document.getElementById("play-pause"),this.playIcon=document.getElementById("play-icon"),this.pauseIcon=document.getElementById("pause-icon"),this.statusText=document.getElementById("status-text"),this.loadingIndicator=document.getElementById("loading-indicator"),this.volumeToggle=document.getElementById("volume-toggle"),this.volumeOnIcon=document.getElementById("volume-on"),this.volumeOffIcon=document.getElementById("volume-off"),this.volumeSlider=document.getElementById("volume-slider"),this.isPlaying=!1,this.isLoading=!1,this.init()}init(){const t=this.audio.getAttribute("data-stream-url");this.audio.src=t,this.audio.volume=parseFloat(this.volumeSlider.value),this.bindEvents()}bindEvents(){this.playPauseBtn.addEventListener("click",()=>this.togglePlayPause()),this.volumeToggle.addEventListener("click",()=>this.toggleMute()),this.volumeSlider.addEventListener("input",t=>this.updateVolume(t.target.value)),this.audio.addEventListener("loadstart",()=>this.setLoading(!0)),this.audio.addEventListener("canplay",()=>this.setLoading(!1)),this.audio.addEventListener("play",()=>this.setPlaying(!0)),this.audio.addEventListener("pause",()=>this.setPlaying(!1)),this.audio.addEventListener("error",()=>this.handleError()),this.audio.addEventListener("stalled",()=>this.setLoading(!0)),this.audio.addEventListener("waiting",()=>this.setLoading(!0)),this.audio.addEventListener("playing",()=>this.setLoading(!1))}togglePlayPause(){this.isPlaying?this.audio.pause():this.audio.play().catch(()=>this.handleError())}setPlaying(t){this.isPlaying=t,t?(this.playIcon.style.display="none",this.pauseIcon.style.display="block",this.statusText.textContent="En vivo",this.playPauseBtn.classList.add("playing")):(this.playIcon.style.display="block",this.pauseIcon.style.display="none",this.statusText.textContent="Radio en vivo",this.playPauseBtn.classList.remove("playing"))}setLoading(t){this.isLoading=t,t?(this.loadingIndicator.style.display="block",this.statusText.textContent="Conectando..."):(this.loadingIndicator.style.display="none",this.isPlaying&&(this.statusText.textContent="En vivo"))}toggleMute(){this.audio.muted=!this.audio.muted,this.audio.muted?(this.volumeOnIcon.style.display="none",this.volumeOffIcon.style.display="block"):(this.volumeOnIcon.style.display="block",this.volumeOffIcon.style.display="none")}updateVolume(t){this.audio.volume=parseFloat(t),this.audio.muted=t==0,t==0?(this.volumeOnIcon.style.display="none",this.volumeOffIcon.style.display="block"):(this.volumeOnIcon.style.display="block",this.volumeOffIcon.style.display="none")}handleError(){this.setLoading(!1),this.setPlaying(!1),this.statusText.textContent="Error de conexiÃ³n",setTimeout(()=>{this.statusText.textContent="Radio en vivo"},3e3)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>new e):new e;
